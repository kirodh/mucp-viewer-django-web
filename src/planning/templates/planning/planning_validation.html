{% extends "base.html" %}
{% block content %}
<!-- planning validation -->
<!-- Author: Kirodh Boodhraj-->
<h1>Validation for Planning: {{ planning.project }}</h1>
<br>
<br>
<!-- Back & Delete -->
<div class="mb-3">
    <a href="{% url 'planning:planning_list' %}" class="btn btn-secondary">Back to Plannings</a>
    <a href="{% url 'planning:planning_delete' planning.pk %}" class="btn btn-danger"
       onclick="return confirm('Are you sure you want to delete this planning?');">Delete Planning</a>
</div>
<br>
<br>
<h1><strong>User File Validation</strong></h1>

<h4>MIU Shapefile</h4>
{% if miu_errors %}
<div class="alert alert-danger">
    <p class="text-danger">Errors:</p>
    <ul>
        {% for e in miu_errors %}
        <li>{{ e }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No errors.</p>
{% endif %}

{% if miu_warnings %}
<button id="toggleWarningsBtnMIU" class="btn btn-warning mb-2">Show Warnings</button>
<div id="warningsContainerMIU" class="alert alert-warning" style="display: none;">
    <p class="text-danger">Warnings:</p>
    <ul>
        {% for w in miu_warnings %}
        <li>{{ w }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No warnings.</p>
{% endif %}

<h4>NBAL Shapefile</h4>
{% if nbal_errors %}
<div class="alert alert-danger">
    <p class="text-danger">Errors:</p>
    <ul>
        {% for e in nbal_errors %}
        <li>{{ e }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No errors.</p>
{% endif %}

{% if nbal_warnings %}
<button id="toggleWarningsBtnNBAL" class="btn btn-warning mb-2">Show Warnings</button>
<div id="warningsContainerNBAL" class="alert alert-warning" style="display: none;">
    <p class="text-danger">Warnings:</p>
    <ul>
        {% for w in nbal_warnings %}
        <li>{{ w }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No warnings.</p>
{% endif %}


<h4>COMPARTMENT Shapefile</h4>
{% if compartment_errors %}
<div class="alert alert-danger">
    <p class="text-danger">Errors:</p>
    <ul>
        {% for e in compartment_errors %}
        <li>{{ e }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No errors.</p>
{% endif %}

{% if compartment_warnings %}
<button id="toggleWarningsBtnCOMPARTMENT" class="btn btn-warning mb-2">Show Warnings</button>
<div id="warningsContainerCOMPARTMENT" class="alert alert-warning" style="display: none;">
    <p class="text-danger">Warnings:</p>
    <ul>
        {% for w in compartment_warnings %}
        <li>{{ w }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No warnings.</p>
{% endif %}


<h4>GIS MAPPING Shapefile</h4>
{% if gis_mapping_errors %}
<div class="alert alert-danger">
    <p class="text-danger">Errors:</p>
    <ul>
        {% for e in gis_mapping_errors %}
        <li>{{ e }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No errors.</p>
{% endif %}

{% if gis_mapping_warnings %}
<button id="toggleWarningsBtnGISMAPPING" class="btn btn-warning mb-2">Show Warnings</button>
<div id="warningsContainerGISMAPPING" class="alert alert-warning" style="display: none;">
    <p class="text-danger">Warnings:</p>
    <ul>
        {% for w in gis_mapping_warnings %}
        <li>{{ w }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No warnings.</p>
{% endif %}


<h4>MIU LINKED SPECIES Excel</h4>
{% if miu_linked_species_errors %}
<div class="alert alert-danger">
    <p class="text-danger">Errors:</p>
    <ul>
        {% for e in miu_linked_species_errors %}
        <li>{{ e }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No errors.</p>
{% endif %}

{% if miu_linked_species_warnings %}
<button id="toggleWarningsBtnMIULINKEDSPECIES" class="btn btn-warning mb-2">Show Warnings</button>
<div id="warningsContainerMIULINKEDSPECIES" class="alert alert-warning" style="display: none;">
    <p class="text-danger">Warnings:</p>
    <ul>
        {% for w in miu_linked_species_warnings %}
        <li>{{ w }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No warnings.</p>
{% endif %}


<h4>NBAL LINKED SPECIES Excel</h4>
{% if nbal_linked_species_errors %}
<div class="alert alert-danger">
    <p class="text-danger">Errors:</p>
    <ul>
        {% for e in nbal_linked_species_errors %}
        <li>{{ e }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No errors.</p>
{% endif %}

{% if nbal_linked_species_warnings %}
<button id="toggleWarningsBtnNBALLINKEDSPECIES" class="btn btn-warning mb-2">Show Warnings</button>
<div id="warningsContainerNBALLINKEDSPECIES" class="alert alert-warning" style="display: none;">
    <p class="text-danger">Warnings:</p>
    <ul>
        {% for w in nbal_linked_species_warnings %}
        <li>{{ w }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No warnings.</p>
{% endif %}

<h4>COMPARTMENT PRIORITIES CSV</h4>
{% if compartment_priorities_errors %}
<div class="alert alert-danger">
    <p class="text-danger">Errors:</p>
    <ul>
        {% for e in compartment_priorities_errors %}
        <li>{{ e }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No errors.</p>
{% endif %}

{% if compartment_priorities_warnings %}
<button id="toggleWarningsBtnCOMPARTMENTPRIORITIES" class="btn btn-warning mb-2">Show Warnings</button>
<div id="warningsContainerCOMPARTMENTPRIORITIES" class="alert alert-warning" style="display: none;">
    <p class="text-danger">Warnings:</p>
    <ul>
        {% for w in compartment_priorities_warnings %}
        <li>{{ w }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No warnings.</p>
{% endif %}



<script>
document.addEventListener("DOMContentLoaded", function () {
    const toggleBtn = document.getElementById("toggleWarningsBtnMIU");
    const warningsContainerMIU = document.getElementById("warningsContainerMIU");

    if (toggleBtn && warningsContainerMIU) {
        toggleBtn.addEventListener("click", function () {
            if (warningsContainerMIU.style.display === "none") {
                warningsContainerMIU.style.display = "block";
                toggleBtn.textContent = "Hide Warnings";
            } else {
                warningsContainerMIU.style.display = "none";
                toggleBtn.textContent = "Show Warnings";
            }
        });
    }
});
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const toggleBtn = document.getElementById("toggleWarningsBtnNBAL");
    const warningsContainerNBAL = document.getElementById("warningsContainerNBAL");

    if (toggleBtn && warningsContainerNBAL) {
        toggleBtn.addEventListener("click", function () {
            if (warningsContainerNBAL.style.display === "none") {
                warningsContainerNBAL.style.display = "block";
                toggleBtn.textContent = "Hide Warnings";
            } else {
                warningsContainerNBAL.style.display = "none";
                toggleBtn.textContent = "Show Warnings";
            }
        });
    }
});
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const toggleBtn = document.getElementById("toggleWarningsBtnCOMPARTMENT");
    const warningsContainerCOMPARTMENT = document.getElementById("warningsContainerCOMPARTMENT");

    if (toggleBtn && warningsContainerCOMPARTMENT) {
        toggleBtn.addEventListener("click", function () {
            if (warningsContainerCOMPARTMENT.style.display === "none") {
                warningsContainerCOMPARTMENT.style.display = "block";
                toggleBtn.textContent = "Hide Warnings";
            } else {
                warningsContainerCOMPARTMENT.style.display = "none";
                toggleBtn.textContent = "Show Warnings";
            }
        });
    }
});
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const toggleBtn = document.getElementById("toggleWarningsBtnGISMAPPING");
    const warningsContainerGISMAPPING = document.getElementById("warningsContainerGISMAPPING");

    if (toggleBtn && warningsContainerGISMAPPING) {
        toggleBtn.addEventListener("click", function () {
            if (warningsContainerGISMAPPING.style.display === "none") {
                warningsContainerGISMAPPING.style.display = "block";
                toggleBtn.textContent = "Hide Warnings";
            } else {
                warningsContainerGISMAPPING.style.display = "none";
                toggleBtn.textContent = "Show Warnings";
            }
        });
    }
});
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const toggleBtn = document.getElementById("toggleWarningsBtnMIULINKEDSPECIES");
    const warningsContainerMIULINKEDSPECIES = document.getElementById("warningsContainerMIULINKEDSPECIES");

    if (toggleBtn && warningsContainerMIULINKEDSPECIES) {
        toggleBtn.addEventListener("click", function () {
            if (warningsContainerMIULINKEDSPECIES.style.display === "none") {
                warningsContainerMIULINKEDSPECIES.style.display = "block";
                toggleBtn.textContent = "Hide Warnings";
            } else {
                warningsContainerMIULINKEDSPECIES.style.display = "none";
                toggleBtn.textContent = "Show Warnings";
            }
        });
    }
});
</script>


<script>
document.addEventListener("DOMContentLoaded", function () {
    const toggleBtn = document.getElementById("toggleWarningsBtnNBALLINKEDSPECIES");
    const warningsContainerNBALLINKEDSPECIES = document.getElementById("warningsContainerNBALLINKEDSPECIES");

    if (toggleBtn && warningsContainerNBALLINKEDSPECIES) {
        toggleBtn.addEventListener("click", function () {
            if (warningsContainerNBALLINKEDSPECIES.style.display === "none") {
                warningsContainerNBALLINKEDSPECIES.style.display = "block";
                toggleBtn.textContent = "Hide Warnings";
            } else {
                warningsContainerNBALLINKEDSPECIES.style.display = "none";
                toggleBtn.textContent = "Show Warnings";
            }
        });
    }
});
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const toggleBtn = document.getElementById("toggleWarningsBtnCOMPARTMENTPRIORITIES");
    const warningsContainerCOMPARTMENTPRIORITIES = document.getElementById("warningsContainerCOMPARTMENTPRIORITIES");

    if (toggleBtn && warningsContainerCOMPARTMENTPRIORITIES) {
        toggleBtn.addEventListener("click", function () {
            if (warningsContainerCOMPARTMENTPRIORITIES.style.display === "none") {
                warningsContainerCOMPARTMENTPRIORITIES.style.display = "block";
                toggleBtn.textContent = "Hide Warnings";
            } else {
                warningsContainerCOMPARTMENTPRIORITIES.style.display = "none";
                toggleBtn.textContent = "Show Warnings";
            }
        });
    }
});
</script>

<br>
<h1><strong>User Support Data Validation</strong></h1>


<h4>GROWTH FORMS support</h4>
{% if growth_forms_errors %}
<div class="alert alert-danger">
    <p class="text-danger">Errors:</p>
    <ul>
        {% for e in growth_forms_errors %}
        <li>{{ e }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No errors.</p>
{% endif %}

{% if growth_forms_warnings %}
<button id="toggleWarningsBtnGROWTHFORMS" class="btn btn-warning mb-2">Show Warnings</button>
<div id="warningsContainerGROWTHFORMS" class="alert alert-warning" style="display: none;">
    <p class="text-danger">Warnings:</p>
    <ul>
        {% for w in growth_forms_warnings %}
        <li>{{ w }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No warnings.</p>
{% endif %}

<h4>TREATMENT METHODS support</h4>
{% if treatment_methods_errors %}
<div class="alert alert-danger">
    <p class="text-danger">Errors:</p>
    <ul>
        {% for e in treatment_methods_errors %}
        <li>{{ e }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No errors.</p>
{% endif %}

{% if treatment_methods_warnings %}
<button id="toggleWarningsBtnTREATMENTMETHOD" class="btn btn-warning mb-2">Show Warnings</button>
<div id="warningsContainerTREATMENTMETHOD" class="alert alert-warning" style="display: none;">
    <p class="text-danger">Warnings:</p>
    <ul>
        {% for w in treatment_methods_warnings %}
        <li>{{ w }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No warnings.</p>
{% endif %}


<h4>SPECIES support</h4>
{% if species_errors %}
<div class="alert alert-danger">
    <p class="text-danger">Errors:</p>
    <ul>
        {% for e in species_errors %}
        <li>{{ e }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No errors.</p>
{% endif %}

{% if species_warnings %}
<button id="toggleWarningsBtnSPECIES" class="btn btn-warning mb-2">Show Warnings</button>
<div id="warningsContainerSPECIES" class="alert alert-warning" style="display: none;">
    <p class="text-danger">Warnings:</p>
    <ul>
        {% for w in species_warnings %}
        <li>{{ w }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No warnings.</p>
{% endif %}

<h4>CLEARING NORMS support</h4>
{% if clearing_norms_errors %}
<div class="alert alert-danger">
    <p class="text-danger">Errors:</p>
    <ul>
        {% for e in clearing_norms_errors %}
        <li>{{ e }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No errors.</p>
{% endif %}

{% if clearing_norms_warnings %}
<button id="toggleWarningsBtnCLEARINGNORMS" class="btn btn-warning mb-2">Show Warnings</button>
<div id="warningsContainerCLEARINGNORMS" class="alert alert-warning" style="display: none;">
    <p class="text-danger">Warnings:</p>
    <ul>
        {% for w in clearing_norms_warnings %}
        <li>{{ w }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No warnings.</p>
{% endif %}


<h4>PRIORITIZATION CATEGORIES support</h4>
{% if prioritization_model_errors %}
<div class="alert alert-danger">
    <p class="text-danger">Errors:</p>
    <ul>
        {% for e in prioritization_model_errors %}
        <li>{{ e }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No errors.</p>
{% endif %}

{% if prioritization_model_warnings %}
<button id="toggleWarningsBtnPRIORITIZATIONCATEGORIES" class="btn btn-warning mb-2">Show Warnings</button>
<div id="warningsContainerPRIORITIZATIONCATEGORIES" class="alert alert-warning" style="display: none;">
    <p class="text-danger">Warnings:</p>
    <ul>
        {% for w in prioritization_model_warnings %}
        <li>{{ w }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No warnings.</p>
{% endif %}


<h4>COSTING MODELS support</h4>
{% if costing_errors %}
<div class="alert alert-danger">
    <p class="text-danger">Errors:</p>
    <ul>
        {% for e in costing_errors %}
        <li>{{ e }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No errors.</p>
{% endif %}

{% if costing_warnings %}
<button id="toggleWarningsBtnCOSTINGMODEL" class="btn btn-warning mb-2">Show Warnings</button>
<div id="warningsContainerCOSTINGMODEL" class="alert alert-warning" style="display: none;">
    <p class="text-danger">Warnings:</p>
    <ul>
        {% for w in costing_warnings %}
        <li>{{ w }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No warnings.</p>
{% endif %}


<h4>PLANNING VARIABLES support</h4>
{% if planning_errors %}
<div class="alert alert-danger">
    <p class="text-danger">Errors:</p>
    <ul>
        {% for e in planning_errors %}
        <li>{{ e }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No errors.</p>
{% endif %}

{% if planning_warnings %}
<button id="toggleWarningsBtnPLANNING" class="btn btn-warning mb-2">Show Warnings</button>
<div id="warningsContainerPLANNING" class="alert alert-warning" style="display: none;">
    <p class="text-danger">Warnings:</p>
    <ul>
        {% for w in planning_warnings %}
        <li>{{ w }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p class="text-success">No warnings.</p>
{% endif %}





<script>
document.addEventListener("DOMContentLoaded", function () {
    const toggleBtn = document.getElementById("toggleWarningsBtnGROWTHFORMS");
    const warningsContainerGROWTHFORMS = document.getElementById("warningsContainerGROWTHFORMS");

    if (toggleBtn && warningsContainerGROWTHFORMS) {
        toggleBtn.addEventListener("click", function () {
            if (warningsContainerGROWTHFORMS.style.display === "none") {
                warningsContainerGROWTHFORMS.style.display = "block";
                toggleBtn.textContent = "Hide Warnings";
            } else {
                warningsContainerGROWTHFORMS.style.display = "none";
                toggleBtn.textContent = "Show Warnings";
            }
        });
    }
});
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const toggleBtn = document.getElementById("toggleWarningsBtnTREATMENTMETHOD");
    const warningsContainerTREATMENTMETHOD = document.getElementById("warningsContainerTREATMENTMETHOD");

    if (toggleBtn && warningsContainerTREATMENTMETHOD) {
        toggleBtn.addEventListener("click", function () {
            if (warningsContainerTREATMENTMETHOD.style.display === "none") {
                warningsContainerTREATMENTMETHOD.style.display = "block";
                toggleBtn.textContent = "Hide Warnings";
            } else {
                warningsContainerTREATMENTMETHOD.style.display = "none";
                toggleBtn.textContent = "Show Warnings";
            }
        });
    }
});
</script>



<script>
document.addEventListener("DOMContentLoaded", function () {
    const toggleBtn = document.getElementById("toggleWarningsBtnSPECIES");
    const warningsContainerSPECIES = document.getElementById("warningsContainerSPECIES");

    if (toggleBtn && warningsContainerSPECIES) {
        toggleBtn.addEventListener("click", function () {
            if (warningsContainerSPECIES.style.display === "none") {
                warningsContainerSPECIES.style.display = "block";
                toggleBtn.textContent = "Hide Warnings";
            } else {
                warningsContainerSPECIES.style.display = "none";
                toggleBtn.textContent = "Show Warnings";
            }
        });
    }
});
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const toggleBtn = document.getElementById("toggleWarningsBtnCLEARINGNORMS");
    const warningsContainerCLEARINGNORMS = document.getElementById("warningsContainerCLEARINGNORMS");

    if (toggleBtn && warningsContainerCLEARINGNORMS) {
        toggleBtn.addEventListener("click", function () {
            if (warningsContainerCLEARINGNORMS.style.display === "none") {
                warningsContainerCLEARINGNORMS.style.display = "block";
                toggleBtn.textContent = "Hide Warnings";
            } else {
                warningsContainerCLEARINGNORMS.style.display = "none";
                toggleBtn.textContent = "Show Warnings";
            }
        });
    }
});
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const toggleBtn = document.getElementById("toggleWarningsBtnPRIORITIZATIONCATEGORIES");
    const warningsContainerPRIORITIZATIONCATEGORIES = document.getElementById("warningsContainerPRIORITIZATIONCATEGORIES");

    if (toggleBtn && warningsContainerPRIORITIZATIONCATEGORIES) {
        toggleBtn.addEventListener("click", function () {
            if (warningsContainerPRIORITIZATIONCATEGORIES.style.display === "none") {
                warningsContainerPRIORITIZATIONCATEGORIES.style.display = "block";
                toggleBtn.textContent = "Hide Warnings";
            } else {
                warningsContainerPRIORITIZATIONCATEGORIES.style.display = "none";
                toggleBtn.textContent = "Show Warnings";
            }
        });
    }
});
</script>


<script>
document.addEventListener("DOMContentLoaded", function () {
    const toggleBtn = document.getElementById("toggleWarningsBtnCOSTINGMODEL");
    const warningsContainerCOSTINGMODEL = document.getElementById("warningsContainerCOSTINGMODEL");

    if (toggleBtn && warningsContainerCOSTINGMODEL) {
        toggleBtn.addEventListener("click", function () {
            if (warningsContainerCOSTINGMODEL.style.display === "none") {
                warningsContainerCOSTINGMODEL.style.display = "block";
                toggleBtn.textContent = "Hide Warnings";
            } else {
                warningsContainerCOSTINGMODEL.style.display = "none";
                toggleBtn.textContent = "Show Warnings";
            }
        });
    }
});
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const toggleBtn = document.getElementById("toggleWarningsBtnPLANNING");
    const warningsContainerPLANNING = document.getElementById("warningsContainerPLANNING");

    if (toggleBtn && warningsContainerPLANNING) {
        toggleBtn.addEventListener("click", function () {
            if (warningsContainerPLANNING.style.display === "none") {
                warningsContainerPLANNING.style.display = "block";
                toggleBtn.textContent = "Hide Warnings";
            } else {
                warningsContainerPLANNING.style.display = "none";
                toggleBtn.textContent = "Show Warnings";
            }
        });
    }
});
</script>





<br>
<br>
<!-- Simulation Form -->
<form method="post">
    {% csrf_token %}
    {% comment %}
    For now, disable Run Simulation if any section has errors
    {% endcomment %}
    {% if miu_errors or nbal_errors or compartment_errors or gis_mapping_errors or miu_linked_species_errors or nbal_linked_species_errors or compartment_priorities_errors or growth_forms_errors or treatment_methods_errors or species_errors or clearing_norms_errors or prioritization_model_errors or costing_errors or planning_errors %}
        <p class="text-danger">Fix errors above to run simulation.</p>
    {% else %}
        <button type="submit" name="run_simulation" value="1" class="btn btn-success">
            Run Simulation
        </button>
    {% endif %}
</form>

<!-- Simulation Status -->
{% if simulation_status %}
<div class="mt-3">
    <strong>Status:</strong> {{ simulation_status|title }}
</div>
{% endif %}
{% endblock %}
